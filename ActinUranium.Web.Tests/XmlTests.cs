using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Collections.Generic;
using System.Xml.Linq;

namespace ActinUranium.Web
{
    [TestClass]
    public class XmlTests
    {
        [TestMethod]
        public void Test()
        {
            string svg = "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 242 42.08\"><path d=\"M9.13 18.43c-.01-.5-.36-.93-1.07-1.28s-1.57-.53-2.58-.53-1.87.18-2.58.53-1.06.78-1.07 1.28H0c.01-1 .54-1.86 1.6-2.57s2.36-1.07 3.87-1.07c1.52 0 2.8.36 3.88 1.07 1.06.7 1.6 1.56 1.6 2.57V29.4H9.13v-.92c-1.02.62-2.24.92-3.65.92-1.52 0-2.8-.36-3.87-1.07-1.07-.7-1.6-1.87-1.6-3.5.01-1.6.54-2.77 1.6-3.48.93-.63 3.44-1.2 7.52-1.76v-1.15zm0 2.98c-3.54.5-5.62.9-6.24 1.2-.7.35-1.06 1.08-1.07 2.2.01 1.12.36 1.86 1.07 2.2s1.57.53 2.58.53 1.87-.18 2.58-.53 1.06-.78 1.07-1.28V21.4z\"/><use xlink:href=\"#NA39slhhnUy7uqm5J8GudA\"/><path d=\"M64.62 9.3h1.83v20.1h-1.83v-.95c-1.02.62-2.24.93-3.65.93-1.52 0-2.8-.36-3.88-1.07-1.06-.7-1.6-2.17-1.6-4.4v-3.65c.01-2.23.54-3.7 1.6-4.4 1.07-.7 2.37-1.07 3.88-1.07 1.4 0 2.63.3 3.65.93V9.3zm-7.3 14.6c.01 1.72.36 2.75 1.07 3.1.7.35 1.57.53 2.58.53s1.87-.18 2.58-.53 1.06-.78 1.07-1.28V18.4c-.01-.5-.36-.93-1.07-1.28s-1.57-.53-2.58-.53-1.87.18-2.58.53-1.06 1.4-1.07 3.12v3.65zm27.74-.9v.9c.01 1.73.36 2.77 1.07 3.1.7.36 1.57.54 2.58.54s1.87-.18 2.58-.54c.7-.35 1.06-.78 1.07-1.3h1.83c-.01 1.02-.54 1.88-1.6 2.58-1.07.7-2.37 1.07-3.88 1.07-1.52 0-2.8-.36-3.87-1.07-1.07-.7-1.6-2.18-1.6-4.4v-3.65c0-2.24.53-3.72 1.6-4.43s2.36-1.07 3.88-1.07 2.8.36 3.88 1.07 1.6 2.2 1.6 4.43v2.74h-9.13zm7.3-2.74c0-1.74-.36-2.78-1.07-3.14s-1.57-.53-2.58-.53-1.87.18-2.58.53c-.7.36-1.07 1.4-1.07 3.14v.9h7.3v-.9zm45.96-1.83c-.01-.5-.36-.93-1.07-1.28s-1.57-.53-2.58-.53-1.87.18-2.58.53-1.06.78-1.07 1.28h-1.83c.01-1 .54-1.86 1.6-2.57s2.36-1.07 3.87-1.07c1.52 0 2.8.36 3.88 1.07 1.06.7 1.6 1.56 1.6 2.57V29.4h-1.83v-.92c-1.02.62-2.24.92-3.65.92-1.52 0-2.8-.36-3.87-1.07-1.07-.7-1.6-1.87-1.6-3.5.01-1.6.54-2.77 1.6-3.48.93-.63 3.44-1.2 7.52-1.76v-1.15zm0 2.98l-6.24 1.2c-.7.35-1.06 1.08-1.07 2.2.01 1.12.36 1.86 1.07 2.2s1.57.53 2.58.53 1.87-.18 2.58-.53 1.06-.78 1.07-1.28V21.4z\"/><use xlink:href=\"#NA39slhhnUy7uqm5J8GudA\" x=\"129.18\"/><path d=\"M188.33 14.78v14.6h-1.83V16.6h-1.83v-1.83h3.66zM186 12.55a1.33 1.33 0 0 1-.4-.97 1.33 1.33 0 0 1 .4-.97 1.33 1.33 0 0 1 .97-.4 1.33 1.33 0 0 1 .97.4 1.33 1.33 0 0 1 .4.97 1.33 1.33 0 0 1-.4.97 1.33 1.33 0 0 1-.97.4 1.33 1.33 0 0 1-.97-.4zm19.12 2.23h1.83v.73c.8-.5 1.7-.73 2.74-.73 1.26 0 2.34.36 3.23 1.07l.45.4c.12-.16.26-.3.4-.4.9-.7 1.96-1.07 3.22-1.07s2.34.36 3.23 1.07c.88.7 1.33 1.56 1.33 2.57h-1.83c-.01-.5-.27-.93-.8-1.28-.54-.35-1.18-.53-1.94-.53s-1.4.18-1.94.53c-.53.35-.8 1.4-.8 3.12v9.13h-1.83V18.43h.13v-.02h-.13c-.01-.5-.27-.93-.8-1.28-.54-.35-1.18-.53-1.94-.53s-1.4.18-1.94.53c-.53.35-.8 1.4-.8 3.12v9.13h-1.83v-14.6zm16.43 3.65V29.4h-1.83V18.43h1.83zM242 14.78v14.6h-1.83V16.6h-1.83v-1.83H242zm-2.34-2.23a1.33 1.33 0 0 1-.4-.97 1.33 1.33 0 0 1 .4-.97 1.33 1.33 0 0 1 .97-.4 1.33 1.33 0 0 1 .97.4 1.33 1.33 0 0 1 .4.97 1.33 1.33 0 0 1-.4.97 1.33 1.33 0 0 1-.97.4 1.33 1.33 0 0 1-.97-.4zM112.07 0h2.56v42.08h-2.56z\"/><defs><path id=\"NA39slhhnUy7uqm5J8GudA\" d=\"M27.75 14.78h1.83v.9c1.02-.6 2.24-.92 3.65-.92 1.52 0 2.8.36 3.88 1.07s1.6 1.57 1.6 2.58V29.4h-1.83V18.4c0-.5-.36-.94-1.07-1.3-.7-.36-1.57-.53-2.58-.53s-1.87.18-2.58.53c-.7.36-1.07 1.4-1.07 3.14v9.13h-1.83v-14.6z\"/></defs></svg>";

            var tree = XElement.Parse(svg);
            XNamespace ns = tree.GetDefaultNamespace();
            var name = XName.Get("symbol", ns.NamespaceName);
            var id = new XAttribute("id", "123");
            var symbol = new XElement(name, id);

            IEnumerable<XElement> children = tree.Elements();
            symbol.Add(children);

            tree.ReplaceNodes(symbol);
            _ = tree.ToString(SaveOptions.DisableFormatting | SaveOptions.OmitDuplicateNamespaces);
        }

        [TestMethod]
        public void TestNamespace()
        {
            string svg = "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" />";
            var tree = XElement.Parse(svg);
            XNamespace ns = tree.GetDefaultNamespace();
            Assert.AreEqual("http://www.w3.org/2000/svg", ns.NamespaceName);
        }
    }
}
